# API를 데이터 여러개로 나눌지, 하나의 AP에 데이터를 많이 받아올지 (feat. Trade-Off)

#### 트레이드-오프
```
개발을 하게되면 많은 부분에서 선택의 기로에 서게된다.
선택의 기로에 서게 된다는 것은, 각자의 장단점이 있기에 고민을 할 수 있는 것이다.
반대로 생각해보면 고민없이 당시의 주류가 정답이라 말하는 방식은 압도적인 장점이 있기에 그런 것이라고 생각해볼 수도 있다.

이러한 것을 엿볼수 있는 단어가 '트레이드-오프'인듯 하다.
선배 개발자들의 답변에서 종종 들어왔지만 그 의미에 대해 좀 더 깊게 생각해보게된 요즘이다.
그러면서 아래와 같은 자세를 가져보는 것에 큰 의의를 느끼게 되었다.
- 각각의 선택지에 장단점을 충분히 파악하기
- 현재 개발상황에 어떠한 선택지가 더 좋은 선택지일지 고민하기

이런 생각이 있을즈음 객체지향의 기본원칙처럼 배우던 'SOLID 원칙의 이면'이라는 제목의 글을 발견했다.
주요 골자는 장단점을 파악해서 트레이드오프를 제대로 할 줄 아는게 중요하다고 강조했다.  
```

## API 하나에 여러 데이터 한번에 받기 vs API 여러개로 데이터 하나씩 받기

```
개발을 하다보니 페이지 하나에 접속했을 때, 필요한 데이터가 여러개로 늘어나면서 자연스럽게 고민이 든다.
기존 API의 응답에 데이터를 추가해서 보낼지? 아니면 API를 추가해서 데이터를 추가로 받아올지?

쉽게 드는 장단점으로는 전자는 요청응답 수가 줄고, DB커넥년 횟수도 줄어들 수 있다.
후자로는 요청응답이나 DB커넥션 횟수가 늘어날 수 있지만, 이후 각각의 응답이 독립적이어서 개발 확장하기에 용이할 수 있다.
김영한님의 답변중 하나에서는 PK키인 ID를 받아온뒤 ID를 통해 응답을 한번 더 보내는 것은 어찌보면 여러번의 응답이 시스템에 부하를 좀 더 주긴하지만,
오히려 복잡한 조회에서 시스템부하를 피할수도 있고, PK에 의한 조회는 전체적으로 봤을 때 미미하기에 이러한 방식을 취한다고 한다.
```
- 많은 경우에서 트레이드오프가 발생한다.
- OKKY글에서 많은 분들이 다양한의견을 냈지만, 다수의 의견은 아래와 같은 이유로 API를 나누는것을 말했다.
  - 이후 유지보수 측면에서 유리하다.
  - 만약 관리자페이지와 같은 경우는 성능보단 유지보수가 더 중요한 측면도 있다.
  - API요청이 비동기방식으로 진행되어 사용자입장에서는 응답속도가 더 빠르게 느껴질수도 있다. (하지만 요청의 수는 증가)

### 결론
- API요청수를 줄인다고 큰 성능향상을 기대하기는 힘들다. 그보단 유지보수와 확장성의 장점을 취할 수 있다.
- 현재 개발초기이므로 각각의 데이터를 추가적인 API를 통해 받기로 결정함

#### 참고링크
- https://okky.kr/articles/795157
- https://www.inflearn.com/questions/1076390/crud%EC%97%90-%EB%94%B0%EB%A5%B8-responsedto%EB%A5%BC-%EB%B3%B4%EB%82%B4%EB%8A%94-%EC%9C%A0%ED%98%95-%EB%B0%8F-responsedto-%EA%B5%AC%EC%84%B1-%EB%B0%A9%EC%8B%9D%EC%97%90-%EB%8C%80%ED%95%9C-%EC%A7%88%EB%AC%B8
- https://careerly.co.kr/comments/104478